<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        $(function()
        {
            var currentColumn = 0,
                iosocket = io.connect(),
                columns = [document.getElementById("left-column"),
                        document.getElementById("right-column")];

            function buildNewImageElement(filename, url)
            { 
                var image = new Image();
                image.id = filename;
                image.src = url + filename;

                var container = document.createElement("div");
                container.className = "container";
                container.appendChild(image);

                return container;
            }

            function insertImageAtFirst(filename, url)
            {
                newElement = buildNewImageElement(filename, url);
                referenceElement = columns[currentColumn].firstChild;

                columns[currentColumn].insertBefore(newElement, referenceElement);
                currentColumn = (currentColumn == 0) ? 1 : 0;
            };

            function removeImage(filename)
            {
                document.getElementById(filename).remove();
            };

            iosocket.on('addImages', function(filenames, url)
            {
                for (i = 0; i < filenames.length; i++)
                {
                    insertImageAtFirst(filenames[i], url);
                }
            });

            iosocket.on('addImage', function(filename, url)
            {
                insertImageAtFirst(filename, url);
            });

            iosocket.on('removeImage', function(filename)
            {
                removeImage(filename);
            });

        });
    </script>
    <meta charset="UTF-8">
    <meta name="description" content="Tcpflow Visualiser">
    <meta name="keywords" content="Tcpflow Visualiser">
    <meta name="author" content="Vsevolod Ivanov">
    <meta name="author" content="Andrei Savin">

    <link rel="stylesheet" href="base.css">

<head>
    <title>Tcpflow Visualiser</title>
</head>

<body>
    <div id="header">
        <div id="menu">
            <header>
                Tcpflow Visualiser
                <small><small>
                    by
                    <a href="https://github.com/sevaivanov/tcpflow_visualiser/network/members">
                        this
                    </a>
                    folks!
                </small></small>
            </header>
        </div>
    </div>

    <!-- Content -->
    <div id="content">
        <div id="left-column" class='sides'>
            <div class="container">

             </div>
        </div>
        <div id="right-column" class='sides'> 
            <div class="container">

             </div>
        </div>
    </div>
</body>
</html>
